1:config下的配置为解析文件的基础配置数据
2:在配置得当的情况下FFReader可以解析各类OFD文件,固定分隔符文件,字段定长文件
3:FIXED_开头的为字段定长接口文件配置,暂时不启用的配置文件以--开头,如需使用请去除--
4:CSV_开头的为固定分隔符接口文件配置,暂时不启用的配置文件以--开头,如需使用请去除--
5:OFD_开头的为OFD文件解析配置,其中OFD_CodeInfo.ini为发送方接收方代码配置,OFD_Dictionary.ini为OFD类的字典配置,OFD_IndexFile.ini为OFD文件索引配置
6:所有配置文件均为UTF-8编码的ini文件,建议使用vscode查看和编辑配置,完善的语法高亮确保你不会配置错误
7:程序doc下有使用手册,请查看
8:演示配置程序默认包含了,并且有一份用于测试验证的数据存放在config/demofiles/下,可以尝试使用解析,搞清楚到底怎么配置

--2022.04.19 by 刘德位


############################################CSV####################################################################
CSV固定分隔符文件可用配置项目说明
如下是一个完整的配置文件说明
约定:一般情况下,一个配置文件(CSV_开头的ini文件)适用于一个接口的一个版本或多个版本,所有配置文件都放到程序的config目录下,一个配置文件里可以配置多个接口文件,这些接口文件共享一份字典配置
数据类型说明
字段定长文件字段类型
目前工具暂不支持对CSV文件指定每个字段的数据类型,工具根据文件内字段的实际情况自动做类型推断,具体推断原则为
1:基于文件内的前100行数据进行推断
2:如果一个字段每行数据要么是小数,要么是空,则认为该字段是数值(包含小数精度长度自动推断)
2:如果一个字段是纯数字或者包含非数字,则认为是字符串

*******************开始演示一个配置文件**************************************
[AuthorInformation]					作者信息栏段-此配置段只允许存在一份
author="XXX"						作者的名称
describe="XXXX接口解析配置文件"		这个配置的说明
email="XXXXXXX@qq.com"				作者的邮箱

[TipDictionary]						Tips字典配置段-此配置段只允许存在一份,此处配置的信息将在文件标题行鼠标悬停时展示,一般作为字段的提示,不做强制要求,按顺序12345往下配置,内容为字段名:解释
1="申请单编号:全局唯一的编号"
2="性别:只允许0和1"

[Dictionary]						字段枚举翻译配置段,-此配置段只允许存在一份,此处配置的信息用于翻译字段的含义,一般建议枚举型字段都配置下按顺序12345往下配置,内容为字段名@枚举值1:含义|枚举值2:含义
1="是否中国籍@0:否|1:是"
2="性别@0:男|1:女"

[YANSHI_CSV_20220401.txt|V1.0]			此配置可以用于解析类文件名形如YANSHI_CSV_*.txt的字段定长文件,这个文件是V1.0版本接口,*代表任意长度的任意字符（不包括空格等空白字符）,如果某个位置的占位符长度是确定的,可以使用?代替,一个?代表一个任意字符,比如XXXXX_????????.txt可以匹配文件XXXXX_20220401.txt,此演示配置存在于CSV_TestCase.ini,演示数据存在于config/demofiles/目录下,你可以直接尝试解析
filedescribe=客户账户信息				此类文件的文件说明,一般用来解释这是什么文件
fieldcount=8							此类文件每行的字段数,如果配置AUTO,则尝试从文件标题行读取文件有多少列,如果文件内包含标题可以配置为AUTO
titlerowindex=0							如果文件内包含标题行,标题行的行号,如果此配置为0或者不配置,则代表不从文件内获取标题
datarowbeginindex=2						数据记录开始的行号
endignorerow=1							文件尾部忽略的行数,如果文件内有文件尾,可以配置到这里,不配置或者为0则不忽略任何行
splitflag=|								字段分隔符
endwithflag=0							每行记录是否以分隔符做结尾,如果是则配置为1,否则配置为0
clearquotes=0							每个记录是否由双引号包裹,如果是则配置解析时清除双引号
trim=0									每个记录是否需要清除左右空格,如果需要配置为1
encoding=GB18030						文件的编码方式
version=V1.0							接口版本,如果配置了versioncheckrow,则必须配置此配置项
versioncheckrow=1						如果文件内包含接口版本信息,则填写版本所在行的行号,如果这个配置填写0或不配置,则不检查版本,如果配置大于0,则取该行数据和version值比较,比较一致才会使用本解析规则解析
versioncheckmode=1						版本检查模式,0为精确匹配,比如版本V1.0,则去第versioncheckrow行查找内容是否是V1.0且本行只有版本号,没有其他内容,大于0则代表模糊匹配,允许本行数据除了V1.0还有其他部分
firstrowcheck="XXXX"					文件首行数据校验,如果文件首行是固定的内容,可以填到这里,填写后如果首行数据不满足,则不使用本规则解析,不支持模糊匹配
lastrowcheck="DATAEND"					文件尾行数据校验,如果文件尾行是固定的内容,可以填到这里,填写错误不影响解析,但是会提醒文件尾可能不对,不支持模糊匹配
1=通讯地址								第1个字段1=字段名
2=性别									第2个字段1=字段名
3=中国籍								第3个字段1=字段名
4=姓名									第4个字段1=字段名
5=年龄									第5个字段1=字段名
6=手机号								第6个字段1=字段名
7=年收入,NSR,1,0						第7个字段1=字段名,字段英文名,是否是数值(-1不指定,让程序自动识别,0不是,1是),缩放位数(0不缩放,1缩放1位即10倍,2缩放2位即100倍,比如接口定义的是分,缩小100倍变成元)
8=备注									第8个字段1=字段名
*******************结束演示一个配置文件**************************************

############################################CSV END#################################################################

############################################FIXED####################################################################
FIXED字段定长文件可用配置项目说明
如下是一个完整的配置文件说明
约定:一般情况下,一个配置文件(FIXED_开头的ini文件)适用于一个接口的一个版本或多个版本,所有配置文件都放到程序的config目录下,一个配置文件里可以配置多个接口文件,这些接口文件共享一份字典配置
数据类型说明
字段定长文件字段类型
C字符型-长度可为1或者以上长度,如果字段长度不够,则左对齐右补空格,某些接口分的比较细致,如C作为char,S作为String,这些都可以映射到本工具的C类型
A数字字符型,限于0—9,但是如果包含非0-9外的字符,也能正常解析接收
N数值型,并可参与数值计算,左补零右对齐,如果数值为负数,则第一位为-,某些接口分F:Folat,D:Double,一般可以使用N代替

*******************开始演示一个配置文件**************************************
[AuthorInformation]					作者信息栏段-此配置段只允许存在一份
author="XXX"						作者的名称
describe="XXXX接口解析配置文件"		这个配置的说明
email="XXXXXXX@qq.com"				作者的邮箱

[TipDictionary]						Tips字典配置段-此配置段只允许存在一份,此处配置的信息将在文件标题行鼠标悬停时展示,一般作为字段的提示,不做强制要求,按顺序12345往下配置,内容为字段名:解释
1="申请单编号:全局唯一的编号"
2="性别:只允许0和1"

[Dictionary]						字段枚举翻译配置段,-此配置段只允许存在一份,此处配置的信息用于翻译字段的含义,一般建议枚举型字段都配置下按顺序12345往下配置,内容为字段名@枚举值1:含义|枚举值2:含义
1="是否中国籍@0:否|1:是"
2="性别@0:男|1:女"

[YANSHI_FIXED_*.txt|V1.0]			此配置可以用于解析类文件名形如YANSHI_FIXED_*.txt的字段定长文件,这个文件是V1.0版本接口,*代表任意长度的任意字符（不包括空格等空白字符）,如果某个位置的占位符长度是确定的,可以使用?代替,一个?代表一个任意字符,比如XXXXX_????????.txt可以匹配文件XXXXX_20220401.txt,此演示配置存在于FIXED_TestCase.ini,演示数据存在于config/demofiles/目录下,你可以直接尝试解析
filedescribe=客户账户信息			此类文件的文件说明,一般用来解释这是什么文件
fieldcount=8						此类文件每行字段数,如果有多种长度可能,则使用竖线分开,比如2|3|4,如非必要,建议每个字段数的版本配置一个解析配置,这样体验更好
datarowbeginindex=14				数据起始行,从第几行开始是数据,小于数据行的一般是文件头等内容
fieldlengthtype=0					每个字段长度类型,0是字节长度,1是字符长度类型,定长文件一般是按字节长度计算
endignorerow=1						文件尾需要忽略的行数,用于忽略文件的文件尾部数据
encoding=GB18030					文件编码,请正确填写编码,否则解析可能会乱码,因编码兼容原因,GB2312/GBK编码的文件可以统一写成GB18030,至于这三个编码的关系,请自行查阅资料
firstrowcheck=DATABEGIN				文件首行数据校验,如果文件首行是固定的内容,可以填到这里,填写后如果首行数据不满足,则不使用本规则解析,不支持模糊匹配
lastrowcheck=DATAEND				文件尾行数据校验,如果文件尾行是固定的内容,可以填到这里,填写错误不影响解析,但是会提醒文件尾可能不对,不支持模糊匹配
versioncheckrow=2					如果文件内包含接口版本信息,则填写版本所在行的行号,如果这个配置填写0或不配置,则不检查版本,如果配置大于0,则取该行数据和version值比较,比较一致才会使用本解析规则解析
version=1.0							接口版本,如果配置了versioncheckrow,则必须配置此配置项
versioncheckmode=0					版本检查模式,0为精确匹配,比如版本1.0,则去第versioncheckrow行查找内容是否是1.0且本行只有版本号,没有其他内容,大于0则代表模糊匹配,允许本行数据除了V1.0还有其他部分
fieldcountcheckrow=4				字段总数校验,如果文件的文件头内有文件字段数行,则可配置,否则请配置0或者留空,如果此配置大于0,则结合fieldcount去校验字段数是否一致,比较一致才会使用本解析规则解析
fielddetailcheckbeginrow=5			字段明细检查开始行,如果文件头内列出了每个字段的信息（一行一个字段的形式）,则可配置,否则请配置0或者留空,如果此配置大于0,则结合fieldcount从fielddetailcheckbeginrow开始逐行去校验每一个字段名称是否一致,比较一致才会使用本解析规则解析
rowcountcheckrow=13					数据记录数校验,如果文件内有数据记录数的行,则可配置,否则请配置0或者留空,文件记录数不是强制校验,不影响解析,此处配置用于检查文件的实际记录数是否和文件头内的记录数一致
1=C,40,0,通讯地址,Address			第1个字段的配置1=数据类型,长度,小数长度,中文说明,字段名
2=C,1,0,性别,Sex					第2个字段的配置2=数据类型,长度,小数长度,中文说明,字段名
3=C,1,0,中国籍,ChineseNationality	第3个字段的配置3=数据类型,长度,小数长度,中文说明,字段名
4=C,20,0,姓名,Name					第4个字段的配置4=数据类型,长度,小数长度,中文说明,字段名
5=N,3,0,年龄,Age					第5个字段的配置5=数据类型,长度,小数长度,中文说明,字段名
6=C,11,0,手机号,Phone				第6个字段的配置5=数据类型,长度,小数长度,中文说明,字段名
7=N,16,2,年收入,AnnualIncome		第7个字段的配置5=数据类型,长度,小数长度,中文说明,字段名
8=C,100,0,备注,Remark				第8个字段的配置5=数据类型,长度,小数长度,中文说明,字段名

如有多个接口需要解析,往下继续再配置一段,只要[]里的名字和上面的不一样即可
*******************结束演示一个配置文件**************************************

############################################FIXED END#################################################################

############################################DBF####################################################################
DBF文件可用配置项目说明
如下是一个完整的配置文件说明
约定:一般情况下,一个配置文件(DBF_开头的ini文件)适用于一个接口的一个版本或多个版本,所有配置文件都放到程序的config目录下,一个配置文件里可以配置多个接口文件,这些接口文件共享一份字典配置
数据类型说明
DBF文件的配置无需配置数据类型,程序将从dbf文件内自动解析字段类型
备注:本程序也支持无配置的情况下解析dbf文件,只是无法享受字典翻译,字段中文名翻译的功能

*******************开始演示一个配置文件**************************************
[AuthorInformation]					作者信息栏段-此配置段只允许存在一份
author="XXX"						作者的名称
describe="XXXX接口解析配置文件"		这个配置的说明
email="XXXXXXX@qq.com"				作者的邮箱

[Global]
matchfilename="YANSHI_DBF_????????.dbf:用于演示FFReader解析dbf的文件"	配置该配置文件所支持的文件列表,请勿配置*.dbf,尽量具体到文件名,支持配置多个文件名匹配规则 文件名匹配规则1:文件解释|文件名匹配规则2:文件解释

[Field]								本解析规则所支持的所有字段的名字,不分具体文件,一套接口文件配置只需要配置一段
ADDRESS="通讯地址"					dbf文件中的字段名=解释说明
SEX="性别"							dbf文件中的字段名=解释说明
CN="中国籍"							dbf文件中的字段名=解释说明
NAME="姓名"							dbf文件中的字段名=解释说明
AGE="年龄"							dbf文件中的字段名=解释说明
PHONE="手机号"						dbf文件中的字段名=解释说明
AI="年收入"							dbf文件中的字段名=解释说明
REMARK="备注"						dbf文件中的字段名=解释说明

[TipDictionary]						tips字典-用于在字段标题悬浮展示
CN="暂时只有0和1这两个选项"			字段名=解释



[Dictionary]						字段字典-用于翻译枚举字段
CN="0:否|1:是"						字段名="枚举值1:含义|枚举值2:含义"
SEX="0:男|1:女"						字段名="枚举值1:含义|枚举值2:含义"
*******************结束演示一个配置文件**************************************

############################################DBF END#################################################################